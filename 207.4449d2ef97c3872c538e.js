(self.webpackChunkbluebits=self.webpackChunkbluebits||[]).push([[207],{6207:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ProductsModule:()=>L});var i=r(2057),o=r(3963),s=r(1340),c=r(9765),a=r(6782),d=r(1989),u=r(3013),n=r(7965),l=r(7745),p=r(7921),m=r(4207),g=r(3380),Z=r(3473);function h(e,t){1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"th",10),d._uU(2,"Name "),d._UZ(3,"p-sortIcon",11),d.qZA(),d.TgZ(4,"th"),d._uU(5,"Image"),d.qZA(),d.TgZ(6,"th",12),d._uU(7,"Price "),d._UZ(8,"p-sortIcon",13),d.qZA(),d.TgZ(9,"th",14),d._uU(10,"Stock "),d._UZ(11,"p-sortIcon",15),d.qZA(),d.TgZ(12,"th",16),d._uU(13,"Category "),d._UZ(14,"p-sortIcon",17),d.qZA(),d.TgZ(15,"th",18),d._uU(16,"Created at "),d._UZ(17,"p-sortIcon",19),d.qZA(),d._UZ(18,"th"),d.qZA())}function f(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._UZ(4,"img",20),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.ALo(7,"currency"),d.qZA(),d.TgZ(8,"td"),d._uU(9),d.qZA(),d.TgZ(10,"td"),d._uU(11),d.qZA(),d.TgZ(12,"td"),d._uU(13),d.ALo(14,"date"),d.qZA(),d.TgZ(15,"td"),d.TgZ(16,"button",21),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().confirm(t.id)}),d.qZA(),d.TgZ(17,"button",22),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().editProduct(t.id)}),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.name),d.xp6(2),d.Q6J("src",e.image,d.LSH)("alt",e.name),d.xp6(2),d.Oqu(d.xi3(7,7,e.price,"USD")),d.xp6(3),d.Oqu(e.countInStock),d.xp6(2),d.Oqu(e.category.name),d.xp6(2),d.Oqu(d.xi3(14,10,e.dataCreated,"mediumDate"))}}const q=function(){return{width:"50vw"}};let b=(()=>{class e{constructor(e,t,r,i){this.productService=e,this.router=t,this.messageService=r,this.confirmationService=i,this.products=[],this.endsubs$=new c.xQ}ngOnInit(){this._getProducts()}ngOnDestroy(){this.endsubs$.next(),this.endsubs$.complete()}_getProducts(){this.productService.getProducts().pipe((0,a.R)(this.endsubs$)).subscribe(e=>this.products=e)}editProduct(e){this.router.navigateByUrl(`/products/form/${e}`)}deleteProduct(e){this.productService.deleteProduct(e).subscribe(e=>{this._getProducts(),this.messageService.add({severity:"success",summary:"Success",detail:"Product was Deleted"})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Product was not Deleted"})})}confirm(e){this.confirmationService.confirm({message:"Do you wan to delete Product?",header:"Delete Product",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteProduct(e)}})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(s.su),d.Y36(o.F0),d.Y36(u.ez),d.Y36(u.YP))},e.\u0275cmp=d.Xpm({type:e,selectors:[["admin-product-list"]],decls:14,vars:7,consts:[[1,"admin-page"],["header","Products","subheader","List of all Products"],[1,"grid"],[1,"col-12"],[1,"p-toolbar-group-left"],["routerLink","/products/form","styleClass","p-button-success","label","new","icon","pi pi-plus"],["responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value","paginator","rows"],["pTemplate","header"],["pTemplate","body"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["pSortableColumn","name"],["field","name"],["pSortableColumn","price"],["field","price"],["pSortableColumn","stock"],["field","stock"],["pSortableColumn","category"],["field","category"],["pSortableColumn","created"],["field","created"],[2,"max-height","100px","width","90%",3,"src","alt"],["icon","pi pi-trash","pButton","",1,"p-button-danger","mr-2",3,"click"],["icon","pi pi-pencil","pButton","",1,"p-button-success",3,"click"]],template:function(e,t){1&e&&(d._UZ(0,"p-toast"),d.TgZ(1,"div",0),d.TgZ(2,"p-card",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d.TgZ(5,"p-toolbar"),d.TgZ(6,"div",4),d._UZ(7,"p-button",5),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",2),d.TgZ(9,"div",3),d.TgZ(10,"p-table",6),d.YNc(11,h,19,0,"ng-template",7),d.YNc(12,f,18,13,"ng-template",8),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(13,"p-confirmDialog",9)),2&e&&(d.xp6(10),d.Q6J("value",t.products)("paginator",!0)("rows",10),d.xp6(3),d.Akn(d.DdM(6,q)),d.Q6J("baseZIndex",1e4))},directives:[n.FN,l.Z,p.o,m.zx,o.rH,g.iA,u.jx,Z.Q,g.lQ,g.fz,m.Hq],pipes:[i.H9,i.uU],encapsulation:2}),e})();var v=r(3738),A=r(8634),T=r(3928),U=r(705),_=r(103),y=r(5301),x=r(6543),I=r(3104);function S(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Name is required"),d.qZA())}function P(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Brand is required"),d.qZA())}function k(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Price is required"),d.qZA())}function C(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Stock is required"),d.qZA())}function w(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Category is required"),d.qZA())}function F(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Description is required"),d.qZA())}function N(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Product Details are required"),d.qZA())}function D(e,t){1&e&&(d.TgZ(0,"small",33),d._uU(1,"Image is required"),d.qZA())}function J(e,t){if(1&e&&(d.TgZ(0,"div",34),d._UZ(1,"img",35),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("src",e.imageDisplay,d.LSH)}}const Y=function(){return{height:"320px"}};let V=(()=>{class e{constructor(e,t,r,i,o,s,c){this.fb=e,this.messageService=t,this.location=r,this.categoriesService=i,this.productsService=o,this.route=s,this.router=c,this.editMode=!1,this.productForm=this.fb.group({name:["",v.kI.required],brand:["",v.kI.required],category:["",v.kI.required],price:["",v.kI.required],countInStock:["",v.kI.required],description:["",v.kI.required],richDescription:["",v.kI.required],image:["",v.kI.required],isFeatured:[!1]}),this.categories=[],this.currentProductId="",this._checkEditMode()}ngOnInit(){this.categoriesService.getCategories().subscribe(e=>this.categories=e)}_checkEditMode(){this.route.params.subscribe(e=>{e.id&&(this.editMode=!0,this.currentProductId=e.id,this.productsService.getProduct(e.id).subscribe(e=>{var t,r;this.productForm.controls.name.setValue(e.name),this.productForm.controls.brand.setValue(e.brand),this.productForm.controls.price.setValue(e.price),this.productForm.controls.category.setValue(null===(t=e.category)||void 0===t?void 0:t.id),this.productForm.controls.countInStock.setValue(e.countInStock),this.productForm.controls.description.setValue(e.description),this.productForm.controls.richDescription.setValue(e.richDescription),this.imageDisplay=e.image,null===(r=this.productForm.controls.image)||void 0===r||r.setValidators([]),this.productForm.controls.image.updateValueAndValidity()},()=>this.router.navigateByUrl("/products")))})}isValid(e){var t,r;return(null===(t=this.productForm.get(e))||void 0===t?void 0:t.touched)&&(null===(r=this.productForm.get(e))||void 0===r?void 0:r.errors)}submit(){if(this.productForm.invalid)return void this.productForm.markAllAsTouched();const e=new FormData;Object.keys(this.productForm.controls).map(t=>{var r;e.append(t,null===(r=this.productForm.get(t))||void 0===r?void 0:r.value)}),console.log(this.editMode),this.editMode?this.updateProduct(e):this.createProduct(e)}updateProduct(e){this.productsService.updateProduct(this.currentProductId,e).subscribe(e=>{this.messageService.add({severity:"success",summary:"Success",detail:`Product ${e.name} edited`}),(0,A.H)(2e3).toPromise().then(()=>{this.location.back()})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"Product is not edited"}))}createProduct(e){this.productsService.createProduct(e).subscribe(e=>{this.messageService.add({severity:"success",summary:"Success",detail:`Product ${e.name} created`}),(0,A.H)(2e3).toPromise().then(()=>{this.location.back()})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"Product is not Created"}))}onImageUpload(e){var t;const r=e.target.files[0];if(r){this.productForm.patchValue({image:r}),null===(t=this.productForm.get("image"))||void 0===t||t.updateValueAndValidity();const e=new FileReader;e.onload=()=>{this.imageDisplay=e.result},e.readAsDataURL(r)}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(v.qu),d.Y36(u.ez),d.Y36(i.Ye),d.Y36(s.GD),d.Y36(s.su),d.Y36(o.gz),d.Y36(o.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["admin-product-form"]],decls:62,vars:20,consts:[[1,"admin-page"],["subheader","You can add or edit categories here",3,"header"],[1,"grid","mb-5"],[1,"col-12"],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["styleClass","p-button-primary mr-2","icon","pi pi-plus",3,"label","click"],["routerLink","/products","styleClass","p-button-secondary","label","Cancel","icon","pi pi-arrow-circle-left"],[1,"grid"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col-4"],["for","Name"],["pInputText","","type","text","formControlName","name",1,"inputfield","w-full"],["class","p-error",4,"ngIf"],["for","Brand"],["pInputText","","type","text","formControlName","brand",1,"inputfield","w-full"],["for","Price"],["formControlName","price","mode","decimal",3,"useGrouping"],["for","Stock"],["mode","decimal","formControlName","countInStock",3,"useGrouping"],["for","Category"],["styleClass","w-full","filterBy","name","formControlName","category","optionValue","id","optionLabel","name","placeholder","Select a Category",3,"options","filter","showClear"],["for","Featured"],["formControlName","isFeatured"],[1,"field","col-12"],["for","Description"],["formControlName","description","rows","5","pInputTextarea",""],["for","richDescription"],["formControlName","richDescription"],["for","image"],["type","file","accept","image/*",1,"p-inputtext","w-full",3,"change"],["class","col-2 mt-2 pl-0",4,"ngIf"],[1,"p-error"],[1,"col-2","mt-2","pl-0"],["alt","",2,"width","100%",3,"src"]],template:function(e,t){1&e&&(d._UZ(0,"p-toast"),d.TgZ(1,"div",0),d.TgZ(2,"p-card",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d.TgZ(5,"p-toolbar"),d._UZ(6,"div",4),d.TgZ(7,"div",5),d.TgZ(8,"p-button",6),d.NdJ("click",function(){return t.submit()}),d.qZA(),d._UZ(9,"p-button",7),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",8),d.TgZ(11,"div",3),d.TgZ(12,"form",9),d.TgZ(13,"div",10),d.TgZ(14,"div",11),d.TgZ(15,"label",12),d._uU(16,"Name"),d.qZA(),d._UZ(17,"input",13),d.YNc(18,S,2,0,"small",14),d.qZA(),d.TgZ(19,"div",11),d.TgZ(20,"label",15),d._uU(21,"Brand"),d.qZA(),d._UZ(22,"input",16),d.YNc(23,P,2,0,"small",14),d.qZA(),d.TgZ(24,"div",11),d.TgZ(25,"label",17),d._uU(26,"Price"),d.qZA(),d._UZ(27,"p-inputNumber",18),d.YNc(28,k,2,0,"small",14),d.qZA(),d.TgZ(29,"div",11),d.TgZ(30,"label",19),d._uU(31,"Stock"),d.qZA(),d._UZ(32,"p-inputNumber",20),d.YNc(33,C,2,0,"small",14),d.qZA(),d.TgZ(34,"div",11),d.TgZ(35,"label",21),d._uU(36,"Category"),d.qZA(),d._UZ(37,"br"),d._UZ(38,"p-dropdown",22),d.YNc(39,w,2,0,"small",14),d.qZA(),d.TgZ(40,"div",11),d.TgZ(41,"label",23),d._uU(42,"Featured"),d.qZA(),d._UZ(43,"br"),d._UZ(44,"p-inputSwitch",24),d.qZA(),d.TgZ(45,"div",25),d.TgZ(46,"label",26),d._uU(47,"Description"),d.qZA(),d._UZ(48,"textarea",27),d.YNc(49,F,2,0,"small",14),d.qZA(),d.TgZ(50,"div",25),d.TgZ(51,"label",28),d._uU(52,"Product Details"),d.qZA(),d._UZ(53,"p-editor",29),d.YNc(54,N,2,0,"small",14),d.qZA(),d.TgZ(55,"div",25),d.TgZ(56,"label",30),d._uU(57,"Main Image"),d.qZA(),d._UZ(58,"br"),d.TgZ(59,"input",31),d.NdJ("change",function(e){return t.onImageUpload(e)}),d.qZA(),d.YNc(60,D,2,0,"small",14),d.YNc(61,J,2,1,"div",32),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(2),d.s9C("header",t.editMode?"Edit Product":"Create Product"),d.xp6(6),d.s9C("label",t.editMode?"Edit":"Create"),d.xp6(4),d.Q6J("formGroup",t.productForm),d.xp6(6),d.Q6J("ngIf",t.isValid("name")),d.xp6(5),d.Q6J("ngIf",t.isValid("brand")),d.xp6(4),d.Q6J("useGrouping",!1),d.xp6(1),d.Q6J("ngIf",t.isValid("price")),d.xp6(4),d.Q6J("useGrouping",!1),d.xp6(1),d.Q6J("ngIf",t.isValid("countInStock")),d.xp6(5),d.Q6J("options",t.categories)("filter",!0)("showClear",!0),d.xp6(1),d.Q6J("ngIf",t.isValid("category")),d.xp6(10),d.Q6J("ngIf",t.isValid("description")),d.xp6(4),d.Akn(d.DdM(19,Y)),d.xp6(1),d.Q6J("ngIf",t.isValid("richDescription")),d.xp6(6),d.Q6J("ngIf",t.isValid("image")),d.xp6(1),d.Q6J("ngIf",t.imageDisplay))},directives:[n.FN,l.Z,p.o,m.zx,o.rH,v._Y,v.JL,v.sg,v.Fj,T.o,v.JJ,v.u,i.O5,U.Rn,_.Lt,y.Ql,x.g,I.ML],encapsulation:2}),e})();const Q=[{path:"",children:[{path:"",component:b},{path:"form",component:V},{path:"form/:id",component:V}]}];let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.Bz.forChild(Q)],o.Bz]}),e})();var B=r(6380);let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.ez,v.UX,B.W,M]]}),e})()}}]);