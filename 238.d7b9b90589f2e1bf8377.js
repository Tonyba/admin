(self.webpackChunkbluebits=self.webpackChunkbluebits||[]).push([[238],{3238:(e,r,t)=>{"use strict";t.r(r),t.d(r,{OrdersModule:()=>w});var s=t(2057),d=t(3963),i=t(2288),o=t(9765),u=t(6782),n=t(1989),a=t(3013),l=t(7965),c=t(7745),p=t(3380),Z=t(3473),g=t(3771),h=t(4207);function q(e,r){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",8),n._uU(2,"User "),n._UZ(3,"p-sortIcon",9),n.qZA(),n.TgZ(4,"th",10),n._uU(5,"Total Price"),n._UZ(6,"p-sortIcon",11),n.qZA(),n.TgZ(7,"th",12),n._uU(8,"Date Ordered "),n._UZ(9,"p-sortIcon",13),n.qZA(),n.TgZ(10,"th",14),n._uU(11,"Status "),n._UZ(12,"p-sortIcon",15),n.qZA(),n._UZ(13,"th"),n.qZA())}function A(e,r){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.ALo(7,"date"),n.qZA(),n.TgZ(8,"td"),n._UZ(9,"p-tag",16),n.qZA(),n.TgZ(10,"td"),n.TgZ(11,"button",17),n.NdJ("click",function(){const r=n.CHM(e).$implicit;return n.oxw().confirm(r.id)}),n.qZA(),n.TgZ(12,"button",18),n.NdJ("click",function(){const r=n.CHM(e).$implicit;return n.oxw().showOrder(r.id)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=r.$implicit,t=n.oxw();n.xp6(2),n.Oqu(e.user.email),n.xp6(2),n.Oqu(e.totalPrice),n.xp6(2),n.Oqu(n.xi3(7,5,e.dateOrdered,"mediumDate")),n.xp6(3),n.Q6J("value",t.orderStatus[e.status].label)("severity",t.orderStatus[e.status].color)}}const m=function(){return{width:"50vw"}};let v=(()=>{class e{constructor(e,r,t,s){this.router=e,this.ordersService=r,this.messageService=t,this.confirmationService=s,this.orders=[],this.orderStatus=i.DF,this.endsubs$=new o.xQ}ngOnInit(){this.getOrders()}ngOnDestroy(){this.endsubs$.next(),this.endsubs$.complete()}getOrders(){this.ordersService.getOrders().pipe((0,u.R)(this.endsubs$)).subscribe(e=>{this.orders=e})}deleteOrder(e){this.ordersService.deleteOrder(e).subscribe(e=>{this.getOrders(),this.messageService.add({severity:"success",summary:"Success",detail:"Order was Deleted"})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Order was not Deleted"})})}confirm(e){this.confirmationService.confirm({message:"Do you wan to delete Order?",header:"Delete Order",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteOrder(e)}})}showOrder(e){console.log(e),this.router.navigateByUrl(`/orders/order-detail/${e}`)}}return e.\u0275fac=function(r){return new(r||e)(n.Y36(d.F0),n.Y36(i.px),n.Y36(a.ez),n.Y36(a.YP))},e.\u0275cmp=n.Xpm({type:e,selectors:[["admin-orders-list"]],decls:9,vars:5,consts:[[1,"admin-page"],["header","Orders","subheader","List of all Orders"],[1,"grid"],[1,"col-12"],["responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value"],["pTemplate","header"],["pTemplate","body"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["pSortableColumn","user"],["field","user"],["pSortableColumn","totalPrice"],["field","totalPrice"],["pSortableColumn","dateOrdered"],["field","dateOrdered"],["pSortableColumn","status"],["field","status"],[3,"value","severity"],["icon","pi pi-trash","pButton","",1,"p-button-danger","mr-2",3,"click"],["icon","pi pi-eye","pButton","",1,"p-button-success",3,"click"]],template:function(e,r){1&e&&(n._UZ(0,"p-toast"),n.TgZ(1,"div",0),n.TgZ(2,"p-card",1),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"p-table",4),n.YNc(6,q,14,0,"ng-template",5),n.YNc(7,A,13,8,"ng-template",6),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(8,"p-confirmDialog",7)),2&e&&(n.xp6(5),n.Q6J("value",r.orders),n.xp6(3),n.Akn(n.DdM(4,m)),n.Q6J("baseZIndex",1e4))},directives:[l.FN,c.Z,p.iA,a.jx,Z.Q,p.lQ,p.fz,g.V,h.Hq],pipes:[s.uU],encapsulation:2}),e})();var T=t(14),O=t(103),b=t(3738);function f(e,r){if(1&e&&(n.TgZ(0,"div",14),n.TgZ(1,"div",15),n._uU(2),n.qZA(),n.TgZ(3,"div",15),n._uU(4),n.qZA(),n.TgZ(5,"div",15),n._uU(6),n.qZA(),n.TgZ(7,"div",15),n._uU(8),n.ALo(9,"currency"),n.qZA(),n.TgZ(10,"div",15),n._uU(11),n.qZA(),n.TgZ(12,"div",15),n._uU(13),n.ALo(14,"currency"),n.qZA(),n.qZA()),2&e){const e=r.$implicit,t=n.oxw(2);n.xp6(2),n.Oqu(null==e.product?null:e.product.name),n.xp6(2),n.Oqu(null==e.product?null:e.product.brand),n.xp6(2),n.Oqu(null==e.product||null==e.product.category?null:e.product.category.name),n.xp6(2),n.Oqu(n.lcZ(9,6,null==e.product?null:e.product.price)),n.xp6(3),n.Oqu(e.quantity),n.xp6(2),n.Oqu(n.lcZ(14,8,t.calculateSubtotal(e.quantity,null==e.product?null:e.product.price)))}}function U(e,r){if(1&e&&(n.TgZ(0,"p-fieldset",16),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"h5"),n._uU(4,"Order Address"),n.qZA(),n.TgZ(5,"p"),n._uU(6),n._UZ(7,"br"),n._uU(8),n._UZ(9,"br"),n._uU(10),n._UZ(11,"br"),n._uU(12),n.qZA(),n.qZA(),n.TgZ(13,"div",5),n.TgZ(14,"h5"),n._uU(15,"Customer Info"),n.qZA(),n.TgZ(16,"p"),n._uU(17),n.qZA(),n.TgZ(18,"p"),n._uU(19),n.qZA(),n.qZA(),n._UZ(20,"div",5),n.qZA(),n.qZA()),2&e){const e=n.oxw(2);n.Q6J("toggleable",!0),n.xp6(6),n.hij(" ",e.order.shippingAddress1," "),n.xp6(2),n.hij(" ",e.order.shippingAddress2," "),n.xp6(2),n.AsE(" ",e.order.zip," ",e.order.city," "),n.xp6(2),n.hij(" ",e.order.country," "),n.xp6(5),n.Oqu(null==e.order.user?null:e.order.user.email),n.xp6(2),n.Oqu(e.order.phone)}}function _(e,r){if(1&e){const e=n.EpF();n.TgZ(0,"div",1),n.TgZ(1,"p-card",2),n.TgZ(2,"p-fieldset",3),n.TgZ(3,"div",4),n.TgZ(4,"div",5),n.TgZ(5,"h5"),n._uU(6,"Order Id"),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.qZA(),n.qZA(),n.TgZ(9,"div",5),n.TgZ(10,"h5"),n._uU(11,"Order Date"),n.qZA(),n.TgZ(12,"p"),n._uU(13),n.ALo(14,"date"),n.qZA(),n.qZA(),n.TgZ(15,"div",5),n.TgZ(16,"h5"),n._uU(17,"Order Status"),n.qZA(),n.TgZ(18,"p-dropdown",6),n.NdJ("onChange",function(r){return n.CHM(e),n.oxw().onStatusChange(r)})("ngModelChange",function(r){return n.CHM(e),n.oxw().selectedStatus=r}),n.qZA(),n.qZA(),n.TgZ(19,"div",5),n.TgZ(20,"h5"),n._uU(21,"Order Total Price"),n.qZA(),n.TgZ(22,"p"),n._uU(23),n.ALo(24,"currency"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(25,"p-fieldset",7),n.TgZ(26,"div",8),n.TgZ(27,"div",9),n._uU(28,"Name"),n.qZA(),n.TgZ(29,"div",9),n._uU(30,"Brand"),n.qZA(),n.TgZ(31,"div",9),n._uU(32,"Category"),n.qZA(),n.TgZ(33,"div",9),n._uU(34,"Price"),n.qZA(),n.TgZ(35,"div",9),n._uU(36,"Quantity"),n.qZA(),n.TgZ(37,"div",9),n._uU(38,"Subtotal"),n.qZA(),n.qZA(),n.YNc(39,f,15,10,"div",10),n.TgZ(40,"div",11),n.TgZ(41,"div",12),n._uU(42,"Total Price"),n.qZA(),n.TgZ(43,"div",9),n._uU(44),n.ALo(45,"currency"),n.qZA(),n.qZA(),n.qZA(),n.YNc(46,U,21,8,"p-fieldset",13),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("toggleable",!0),n.xp6(6),n.Oqu(e.order.id),n.xp6(5),n.Oqu(n.xi3(14,10,e.order.dateOrdered,"mediumDate")),n.xp6(5),n.Q6J("options",e.orderStatuses)("ngModel",e.selectedStatus),n.xp6(5),n.Oqu(n.xi3(24,13,e.order.totalPrice,"USD")),n.xp6(2),n.Q6J("toggleable",!0),n.xp6(14),n.Q6J("ngForOf",e.order.orderItems),n.xp6(5),n.Oqu(n.lcZ(45,16,e.order.totalPrice)),n.xp6(2),n.Q6J("ngIf",e.order.user)}}const x=[{path:"",children:[{path:"",component:v},{path:"order-detail/:id",component:(()=>{class e{constructor(e,r,t,s){this.orderService=e,this.router=r,this.messageService=t,this.route=s,this.orderStatuses=[]}ngOnInit(){this._mapOrderStatus(),this._getOrder()}onStatusChange(e){this.orderService.updateOrder(this.currentOrderId,{status:e.value}).subscribe(e=>{this.messageService.add({severity:"success",summary:"Success",detail:"Order is updated!"})},()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Order is not updated!"})})}_mapOrderStatus(){this.orderStatuses=Object.keys(i.DF).map(e=>({id:e,name:i.DF[e].label}))}_getOrder(){this.route.params.subscribe(e=>{e.id&&this.orderService.getOrder(e.id).subscribe(r=>{this.order=r,this.selectedStatus=r.status,console.log(this.selectedStatus),this.currentOrderId=e.id},()=>{this.router.navigateByUrl("/orders")})})}calculateSubtotal(e,r){return e*r}}return e.\u0275fac=function(r){return new(r||e)(n.Y36(i.px),n.Y36(d.F0),n.Y36(a.ez),n.Y36(d.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["admin-order-detail"]],decls:2,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],["header","View Order","subheader","You can edit order status here"],["styleClass","mb-4","legend","Order Details",3,"toggleable"],[1,"grid"],[1,"col-4"],["optionLabel","name","optionValue","id",3,"options","ngModel","onChange","ngModelChange"],["styleClass","mb-4","legend","Order Items",3,"toggleable"],[1,"grid","mb-3"],[1,"col-2","font-bold"],["class","grid mb-5",4,"ngFor","ngForOf"],[1,"grid",2,"color","green"],[1,"col-2","col-offset-8","font-bold"],["legend","Order Adress",3,"toggleable",4,"ngIf"],[1,"grid","mb-5"],[1,"col-2"],["legend","Order Adress",3,"toggleable"]],template:function(e,r){1&e&&(n._UZ(0,"p-toast"),n.YNc(1,_,47,18,"div",0)),2&e&&(n.xp6(1),n.Q6J("ngIf",r.order))},directives:[l.FN,s.O5,c.Z,T.p,O.Lt,b.JJ,b.On,s.sg],pipes:[s.uU,s.H9],encapsulation:2}),e})()}]}];let S=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[d.Bz.forChild(x)],d.Bz]}),e})();var y=t(6380);let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,b.u5,y.W,S]]}),e})()}}]);