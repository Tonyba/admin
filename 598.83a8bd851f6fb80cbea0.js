(self.webpackChunkbluebits=self.webpackChunkbluebits||[]).push([[598],{1598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CategoriesModule:()=>w});var i=r(2057),o=r(3738),s=r(3963),a=r(1340),c=r(9765),n=r(6782),l=r(1989),g=r(3013),u=r(7965),d=r(7745),p=r(7921),m=r(4207),Z=r(3380),h=r(3473);function y(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",10),l._uU(2,"Name "),l._UZ(3,"p-sortIcon",11),l.qZA(),l.TgZ(4,"th"),l._uU(5,"Icon"),l.qZA(),l.TgZ(6,"th"),l._uU(7,"Color"),l.qZA(),l._UZ(8,"th"),l.qZA())}const f=function(e){return{color:e}};function b(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._UZ(4,"i",12),l.qZA(),l.TgZ(5,"td"),l._UZ(6,"i",13),l.qZA(),l.TgZ(7,"td"),l.TgZ(8,"button",14),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().confirm(t.id)}),l.qZA(),l.TgZ(9,"button",15),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().editCategory(t.id)}),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e.name),l.xp6(2),l.Gre("pi pi-",e.icon,""),l.xp6(2),l.Q6J("ngStyle",l.VKq(5,f,e.color))}}const v=function(){return{width:"50vw"}};let C=(()=>{class e{constructor(e,t,r,i){this.router=e,this.categoriesService=t,this.messageService=r,this.confirmationService=i,this.categories=[],this.endsubs$=new c.xQ}ngOnInit(){this.getCategories()}ngOnDestroy(){this.endsubs$.next(),this.endsubs$.complete()}getCategories(){this.categoriesService.getCategories().pipe((0,n.R)(this.endsubs$)).subscribe(e=>this.categories=e)}editCategory(e){this.router.navigateByUrl(`/categories/form/${e}`)}deleteCategory(e){this.categoriesService.deleteCategory(e).subscribe(e=>{this.getCategories(),this.messageService.add({severity:"success",summary:"Success",detail:"Category was Deleted"})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Category was not Deleted"})})}confirm(e){this.confirmationService.confirm({message:"Do you wan to delete Category?",header:"Delete Category",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteCategory(e)}})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(s.F0),l.Y36(a.GD),l.Y36(g.ez),l.Y36(g.YP))},e.\u0275cmp=l.Xpm({type:e,selectors:[["admin-categories-list"]],decls:14,vars:5,consts:[[1,"admin-page"],["header","Categories","subheader","List of all Categories"],[1,"grid"],[1,"col-12"],[1,"p-toolbar-group-left"],["routerLink","/categories/form","styleClass","p-button-success","label","new","icon","pi pi-plus"],["responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value"],["pTemplate","header"],["pTemplate","body"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["pSortableColumn","name"],["field","name"],[2,"font-size","2rem"],[1,"pi","pi-circle-on",2,"font-size","2rem",3,"ngStyle"],["icon","pi pi-trash","pButton","",1,"p-button-danger","mr-2",3,"click"],["icon","pi pi-pencil","pButton","",1,"p-button-success",3,"click"]],template:function(e,t){1&e&&(l._UZ(0,"p-toast"),l.TgZ(1,"div",0),l.TgZ(2,"p-card",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"p-toolbar"),l.TgZ(6,"div",4),l._UZ(7,"p-button",5),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"div",2),l.TgZ(9,"div",3),l.TgZ(10,"p-table",6),l.YNc(11,y,9,0,"ng-template",7),l.YNc(12,b,10,7,"ng-template",8),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(13,"p-confirmDialog",9)),2&e&&(l.xp6(10),l.Q6J("value",t.categories),l.xp6(3),l.Akn(l.DdM(4,v)),l.Q6J("baseZIndex",1e4))},directives:[u.FN,d.Z,p.o,m.zx,s.rH,Z.iA,g.jx,h.Q,Z.lQ,Z.fz,i.PC,m.Hq],encapsulation:2}),e})();var q=r(8634),A=r(3928),T=r(5609);function U(e,t){1&e&&(l.TgZ(0,"small",17),l._uU(1,"name is required"),l.qZA())}function _(e,t){1&e&&(l.TgZ(0,"small",17),l._uU(1,"icon is required"),l.qZA())}function x(e,t){1&e&&(l.TgZ(0,"small",17),l._uU(1,"icon is required"),l.qZA())}let S=(()=>{class e{constructor(e,t,r,i,s,a){this.fb=e,this.categoryService=t,this.route=r,this.messageService=i,this.location=s,this.router=a,this.categoryForm=this.fb.group({name:["",o.kI.required],icon:["",o.kI.required],color:[""]}),this.editMode=!1,this._checkEditMode()}isValid(e){return this.categoryForm.controls[e].errors&&this.categoryForm.controls[e].touched}ngOnInit(){}_checkEditMode(){this.route.params.subscribe(e=>{e.id&&(this.editMode=!0,this.categoryService.getCategory(e.id).subscribe(t=>{this.categoryForm.controls.name.setValue(t.name),this.categoryForm.controls.icon.setValue(t.icon),this.categoryForm.controls.color.setValue(t.color),this.currentCategoryId=e.id},()=>this.router.navigateByUrl("/categories")))})}updateCategory(e){this.categoryService.updateCategory(this.currentCategoryId,e).subscribe(()=>{this.messageService.add({severity:"success",summary:"Success",detail:`Category ${e.name} is Edited`}),(0,q.H)(200).toPromise().then(()=>{this.location.back()})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"Category is not Edited"}))}createCategory(e){this.categoryService.createCategory(e).subscribe(()=>{this.messageService.add({severity:"success",summary:"Success",detail:`Category ${e.name} is Created`}),(0,q.H)(200).toPromise().then(()=>{this.location.back()})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"Category is not Created"}))}submit(){if(this.categoryForm.invalid)return void this.categoryForm.markAllAsTouched();const e={name:this.categoryForm.controls.name.value,icon:this.categoryForm.controls.icon.value,color:this.categoryForm.controls.color.value};this.editMode?this.updateCategory(e):this.createCategory(e),this.categoryForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(o.qu),l.Y36(a.GD),l.Y36(s.gz),l.Y36(g.ez),l.Y36(i.Ye),l.Y36(s.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["admin-categories-form"]],decls:30,vars:6,consts:[[1,"admin-page"],["subheader","You can add or edit categories here",3,"header"],[1,"grid","mb-5"],[1,"col-12"],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["styleClass","p-button-primary mr-2","icon","pi pi-plus",3,"label","click"],["routerLink","/categories","styleClass","p-button-secondary","label","Cancel","icon","pi pi-arrow-circle-left"],[1,"grid"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["for","icon"],["pInputText","","type","text","formControlName","name",1,"inputfield","w-full"],["class","p-error",4,"ngIf"],["pInputText","","type","text","formControlName","icon",1,"inputfield","w-full"],["formControlName","color"],[1,"p-error"]],template:function(e,t){1&e&&(l._UZ(0,"p-toast"),l.TgZ(1,"div",0),l.TgZ(2,"p-card",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"p-toolbar"),l._UZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"p-button",6),l.NdJ("click",function(){return t.submit()}),l.qZA(),l._UZ(9,"p-button",7),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",8),l.TgZ(11,"div",3),l.TgZ(12,"form",9),l.TgZ(13,"div",10),l.TgZ(14,"div",11),l.TgZ(15,"label",12),l._uU(16,"Name"),l.qZA(),l._UZ(17,"input",13),l.YNc(18,U,2,0,"small",14),l.qZA(),l.TgZ(19,"div",11),l.TgZ(20,"label",12),l._uU(21,"Icon"),l.qZA(),l._UZ(22,"input",15),l.YNc(23,_,2,0,"small",14),l.qZA(),l.TgZ(24,"div",11),l.TgZ(25,"label",12),l._uU(26,"Color"),l.qZA(),l._UZ(27,"br"),l._UZ(28,"p-colorPicker",16),l.YNc(29,x,2,0,"small",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.s9C("header",t.editMode?"Edit Category":"Create Category"),l.xp6(6),l.s9C("label",t.editMode?"Edit":"Create"),l.xp6(4),l.Q6J("formGroup",t.categoryForm),l.xp6(6),l.Q6J("ngIf",t.isValid("name")),l.xp6(5),l.Q6J("ngIf",t.isValid("icon")),l.xp6(6),l.Q6J("ngIf",t.isValid("icon")))},directives:[u.FN,d.Z,p.o,m.zx,s.rH,o._Y,o.JL,o.sg,o.Fj,A.o,o.JJ,o.u,i.O5,T.zH],encapsulation:2}),e})();const k=[{path:"",children:[{path:"",component:C},{path:"form",component:S},{path:"form/:id",component:S}]}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(k)],s.Bz]}),e})();var Y=r(6380);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,o.UX,Y.W,F]]}),e})()}}]);