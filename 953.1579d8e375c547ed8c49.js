(self.webpackChunkbluebits=self.webpackChunkbluebits||[]).push([[953],{3953:(e,t,r)=>{"use strict";r.r(t),r.d(t,{UsersModule:()=>Q});var s=r(2057),i=r(3963),o=r(5963),n=r(6733),l=r(9765),a=r(6782),u=r(1989),c=r(3013),m=r(7965),d=r(7745),p=r(7921),Z=r(4207),h=r(3380),g=r(3473),f=r(3771);function v(e,t){1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"th",10),u._uU(2,"Name "),u._UZ(3,"p-sortIcon",11),u.qZA(),u.TgZ(4,"th"),u._uU(5,"Email"),u.qZA(),u.TgZ(6,"th"),u._uU(7,"Is Admin"),u.qZA(),u.TgZ(8,"th"),u._uU(9,"Country"),u.qZA(),u.qZA())}function U(e,t){1&e&&u._UZ(0,"p-tag",16),2&e&&u.Q6J("rounded",!0)}function A(e,t){1&e&&u._UZ(0,"p-tag",17),2&e&&u.Q6J("rounded",!0)}function b(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u.YNc(6,U,1,1,"p-tag",12),u.YNc(7,A,1,1,"p-tag",13),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td"),u.TgZ(11,"button",14),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().confirm(t.id)}),u.qZA(),u.TgZ(12,"button",15),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().editUser(t.id)}),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,r=u.oxw();u.xp6(2),u.Oqu(e.name),u.xp6(2),u.Oqu(e.email),u.xp6(2),u.Q6J("ngIf",e.isAdmin),u.xp6(1),u.Q6J("ngIf",!e.isAdmin),u.xp6(2),u.Oqu(r.getCountryName(e.country))}}const q=function(){return{width:"50vw"}};let T=(()=>{class e{constructor(e,t,s,i){this.router=e,this.userService=t,this.messageService=s,this.confirmationService=i,this.users=[],this.endsubs$=new l.xQ,n.registerLocale(r(1662))}ngOnInit(){this.getUsers()}ngOnDestroy(){this.endsubs$.next(),this.endsubs$.complete()}getUsers(){this.userService.getUsers().pipe((0,a.R)(this.endsubs$)).subscribe(e=>this.users=e)}getCountryName(e){return n.getName(e,"en",{select:"official"})}deleteUser(e){this.userService.deleteUser(e).subscribe(e=>{this.getUsers(),this.messageService.add({severity:"success",summary:"Success",detail:"User was Deleted"})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"User was not Deleted"})})}confirm(e){this.confirmationService.confirm({message:"Do you wan to delete User?",header:"Delete User",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteUser(e)}})}editUser(e){this.router.navigateByUrl(`/users/form/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(i.F0),u.Y36(o.fz),u.Y36(c.ez),u.Y36(c.YP))},e.\u0275cmp=u.Xpm({type:e,selectors:[["admin-users-list"]],decls:14,vars:5,consts:[[1,"admin-page"],["header","Users","subheader","List of all Users"],[1,"grid"],[1,"col-12"],[1,"p-toolbar-group-left"],["routerLink","/users/form","styleClass","p-button-success","label","new","icon","pi pi-plus"],["styleClass","p-datatable-gridlines",3,"value"],["pTemplate","header"],["pTemplate","body"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["pSortableColumn","name"],["field","name"],["styleClass","p-mr-2","severity","success","value","Admin",3,"rounded",4,"ngIf"],["styleClass","p-mr-2","severity","danger","value","User",3,"rounded",4,"ngIf"],["icon","pi pi-trash","pButton","",1,"p-button-danger","mr-2",3,"click"],["icon","pi pi-pencil","pButton","",1,"p-button-success",3,"click"],["styleClass","p-mr-2","severity","success","value","Admin",3,"rounded"],["styleClass","p-mr-2","severity","danger","value","User",3,"rounded"]],template:function(e,t){1&e&&(u._UZ(0,"p-toast"),u.TgZ(1,"div",0),u.TgZ(2,"p-card",1),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u.TgZ(5,"p-toolbar"),u.TgZ(6,"div",4),u._UZ(7,"p-button",5),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"div",2),u.TgZ(9,"div",3),u.TgZ(10,"p-table",6),u.YNc(11,v,10,0,"ng-template",7),u.YNc(12,b,13,5,"ng-template",8),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(13,"p-confirmDialog",9)),2&e&&(u.xp6(10),u.Q6J("value",t.users),u.xp6(3),u.Akn(u.DdM(4,q)),u.Q6J("baseZIndex",1e4))},directives:[m.FN,d.Z,p.o,Z.zx,i.rH,h.iA,c.jx,g.Q,h.lQ,h.fz,s.O5,Z.Hq,f.V],encapsulation:2}),e})();var y=r(3738),_=r(8634),F=r(3928),x=r(5301),C=r(103);function w(e,t){1&e&&(u.TgZ(0,"small",34),u._uU(1,"name is required"),u.qZA())}function I(e,t){1&e&&(u.TgZ(0,"small",34),u._uU(1,"email is required"),u.qZA())}function N(e,t){1&e&&(u.TgZ(0,"small",34),u._uU(1,"email have to be valid"),u.qZA())}function S(e,t){1&e&&(u.TgZ(0,"small",34),u._uU(1,"password is required and must has 6 characters or more"),u.qZA())}function k(e,t){1&e&&(u.TgZ(0,"small",34),u._uU(1,"phone is required"),u.qZA())}let Y=(()=>{class e{constructor(e,t,s,i,o,l){this.fb=e,this.userService=t,this.route=s,this.messageService=i,this.location=o,this.router=l,this.userForm=this.fb.group({name:["",y.kI.required],email:["",[y.kI.required,y.kI.email]],password:["",[y.kI.required,y.kI.minLength(6)]],phone:["",y.kI.required],isAdmin:[!1],street:[""],apartment:[""],zip:[""],city:[""],country:[""]}),this.editMode=!1,this.countries=[],this._checkEditMode(),n.registerLocale(r(1662)),this.countries=Object.entries(n.getNames("en",{select:"official"})).map(e=>({id:e[0],name:e[1]}))}ngOnInit(){}_checkEditMode(){this.route.params.subscribe(e=>{e.id&&(this.editMode=!0,this.currentUserId=e.id,this.userService.getUser(e.id).subscribe(e=>{this.userForm.controls.name.setValue(e.name),this.userForm.controls.email.setValue(e.email),this.userForm.controls.isAdmin.setValue(e.isAdmin),this.userForm.controls.street.setValue(e.street),this.userForm.controls.phone.setValue(e.phone),this.userForm.controls.apartment.setValue(e.apartment),this.userForm.controls.zip.setValue(e.zip),this.userForm.controls.city.setValue(e.city),this.userForm.controls.country.setValue(e.country),this.userForm.controls.password.setValidators([]),this.userForm.controls.password.updateValueAndValidity()},()=>this.router.navigateByUrl("/users")))})}isValid(e){return this.userForm.controls[e].errors&&this.userForm.controls[e].touched}createUser(e){this.userService.createUser(e).subscribe(()=>{this.userForm.reset(),this.messageService.add({severity:"success",summary:"Success",detail:`User ${e.name} is Created`}),(0,_.H)(200).toPromise().then(()=>{this.location.back()})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"User is not Created"}))}updateUser(e){this.userService.updateUser(this.currentUserId,e).subscribe(()=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${e.name} is Edited`}),(0,_.H)(200).toPromise().then(()=>{this.location.back()})},()=>this.messageService.add({severity:"error",summary:"Error",detail:"User is not Edited"}))}submit(){if(this.userForm.invalid)return void this.userForm.markAllAsTouched();const e={name:this.userForm.controls.name.value,email:this.userForm.controls.email.value,password:this.userForm.controls.password.value,isAdmin:this.userForm.controls.isAdmin.value,phone:this.userForm.controls.phone.value,street:this.userForm.controls.street.value,apartment:this.userForm.controls.apartment.value,zip:this.userForm.controls.zip.value,city:this.userForm.controls.city.value,country:this.userForm.controls.country.value};this.editMode?this.updateUser(e):this.createUser(e)}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(y.qu),u.Y36(o.fz),u.Y36(i.gz),u.Y36(c.ez),u.Y36(s.Ye),u.Y36(i.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["admin-user-form"]],decls:62,vars:11,consts:[[1,"admin-page"],["subheader","You can add or edit categories here",3,"header"],[1,"grid","mb-5"],[1,"col-12"],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["styleClass","p-button-primary mr-2","icon","pi pi-plus",3,"label","click"],["routerLink","/users","styleClass","p-button-secondary","label","Cancel","icon","pi pi-arrow-circle-left"],[1,"grid"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col-4"],["for","name"],["pInputText","","type","text","formControlName","name",1,"inputfield","w-full"],["class","p-error",4,"ngIf"],["for","email"],["pInputText","","type","text","formControlName","email",1,"inputfield","w-full"],["for","password"],["pInputText","","type","password","formControlName","password",1,"inputfield","w-full"],["for","phone"],["pInputText","","type","text","formControlName","phone",1,"inputfield","w-full"],[1,"field","col-6"],["for","isAdmin"],["formControlName","isAdmin"],["for","street"],["pInputText","","type","text","formControlName","street",1,"inputfield","w-full"],["for","apartment"],["pInputText","","type","text","formControlName","apartment",1,"inputfield","w-full"],["for","zip"],["pInputText","","type","text","formControlName","zip",1,"inputfield","w-full"],["for","city"],["pInputText","","type","text","formControlName","city",1,"inputfield","w-full"],["for","country"],["styleClass","w-full","formControlName","country","optionLabel","name","optionValue","id","filterBy","name","placeholder","Select a Country",3,"options","filter","showClear"],[1,"p-error"]],template:function(e,t){1&e&&(u._UZ(0,"p-toast"),u.TgZ(1,"div",0),u.TgZ(2,"p-card",1),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u.TgZ(5,"p-toolbar"),u._UZ(6,"div",4),u.TgZ(7,"div",5),u.TgZ(8,"p-button",6),u.NdJ("click",function(){return t.submit()}),u.qZA(),u._UZ(9,"p-button",7),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div",8),u.TgZ(11,"div",3),u.TgZ(12,"form",9),u.TgZ(13,"div",10),u.TgZ(14,"div",11),u.TgZ(15,"label",12),u._uU(16,"Name"),u.qZA(),u._UZ(17,"input",13),u.YNc(18,w,2,0,"small",14),u.qZA(),u.TgZ(19,"div",11),u.TgZ(20,"label",15),u._uU(21,"Email"),u.qZA(),u._UZ(22,"input",16),u.YNc(23,I,2,0,"small",14),u.YNc(24,N,2,0,"small",14),u.qZA(),u.TgZ(25,"div",11),u.TgZ(26,"label",17),u._uU(27,"Password"),u.qZA(),u._UZ(28,"input",18),u.YNc(29,S,2,0,"small",14),u.qZA(),u.TgZ(30,"div",11),u.TgZ(31,"label",19),u._uU(32,"Phone"),u.qZA(),u._UZ(33,"br"),u._UZ(34,"input",20),u.YNc(35,k,2,0,"small",14),u.qZA(),u.TgZ(36,"div",21),u.TgZ(37,"label",22),u._uU(38,"Admin"),u.qZA(),u._UZ(39,"br"),u._UZ(40,"p-inputSwitch",23),u.qZA(),u.TgZ(41,"div",11),u.TgZ(42,"label",24),u._uU(43,"Street"),u.qZA(),u._UZ(44,"input",25),u.qZA(),u.TgZ(45,"div",11),u.TgZ(46,"label",26),u._uU(47,"Apartment"),u.qZA(),u._UZ(48,"input",27),u.qZA(),u.TgZ(49,"div",11),u.TgZ(50,"label",28),u._uU(51,"Zip Code"),u.qZA(),u._UZ(52,"input",29),u.qZA(),u.TgZ(53,"div",11),u.TgZ(54,"label",30),u._uU(55,"City"),u.qZA(),u._UZ(56,"input",31),u.qZA(),u.TgZ(57,"div",11),u.TgZ(58,"label",32),u._uU(59,"Country"),u.qZA(),u._UZ(60,"br"),u._UZ(61,"p-dropdown",33),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.s9C("header",t.editMode?"Edit User":"Create User"),u.xp6(6),u.s9C("label",t.editMode?"Edit":"Create"),u.xp6(4),u.Q6J("formGroup",t.userForm),u.xp6(6),u.Q6J("ngIf",t.isValid("name")),u.xp6(5),u.Q6J("ngIf",(null==t.userForm.controls.email||null==t.userForm.controls.email.errors?null:t.userForm.controls.email.errors.required)&&(null==t.userForm.controls.email?null:t.userForm.controls.email.touched)),u.xp6(1),u.Q6J("ngIf",(null==t.userForm.controls.email||null==t.userForm.controls.email.errors?null:t.userForm.controls.email.errors.email)&&(null==t.userForm.controls.email?null:t.userForm.controls.email.touched)),u.xp6(5),u.Q6J("ngIf",t.isValid("password")),u.xp6(6),u.Q6J("ngIf",t.isValid("phone")),u.xp6(26),u.Q6J("options",t.countries)("filter",!0)("showClear",!0))},directives:[m.FN,d.Z,p.o,Z.zx,i.rH,y._Y,y.JL,y.sg,y.Fj,F.o,y.JJ,y.u,s.O5,x.Ql,C.Lt],encapsulation:2}),e})();const J=[{path:"",children:[{path:"",component:T},{path:"form",component:Y},{path:"form/:id",component:Y}]}];let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.Bz.forChild(J)],i.Bz]}),e})();var V=r(6380);let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.ez,y.UX,V.W,z]]}),e})()}}]);